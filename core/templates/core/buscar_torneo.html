{% extends 'core/base.html' %}

{% block content %}
<div class="max-w-2xl mx-auto min-h-[60vh]">

    <div class="mb-6">
        <a href="{% url 'mis_torneos' %}" class="text-gray-500 hover:text-gray-900 flex items-center mb-4">
            &larr; Volver a Mis Torneos
        </a>
        <h1 class="text-3xl font-bold text-slate-800"> Buscar Torneo</h1>
        <p class="text-gray-600">Ingresa el nombre del torneo o el c贸digo de invitaci贸n.</p>
    </div>

    <form method="get" class="mb-8 relative">
        <input type="text" name="q" value="{{ query|default:'' }}" 
               class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"
               placeholder="Ej: Mundial Amigos o C贸digo X7Z9...">
        <span class="absolute left-3 top-3.5 text-gray-400 text-xl"></span>
        <button type="submit" class="absolute right-2 top-2 bg-blue-600 text-white px-4 py-1.5 rounded-md font-bold hover:bg-blue-700">
            Buscar
        </button>
    </form>

    {% if query %}
        <h2 class="text-xl font-bold text-gray-700 mb-4">Resultados para "{{ query }}"</h2>
        
        {% if resultados %}
            <div class="space-y-4">
                {% for torneo in resultados %}
                <div class="bg-white p-4 rounded-lg shadow border border-gray-200 flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        {% if torneo.image %}
                            <img src="{{ torneo.image }}" class="w-10 h-10 rounded-full object-cover">
                        {% else %}
                            <div class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-lg"></div>
                        {% endif %}
                        <div>
                            <h3 class="font-bold text-lg">{{ torneo.name }}</h3>
                            <p class="text-xs text-gray-500">Creado por {{ torneo.creator.username }}</p>
                        </div>
                    </div>

                    <a href="{% url 'unirse_torneo' torneo.id %}" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md font-bold text-sm transition">
                        Unirse
                    </a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 text-yellow-700">
                <p>No se encontraron torneos. Verifica el c贸digo o el nombre.</p>
            </div>
        {% endif %}

    {% else %}
        <div class="text-center text-gray-400 mt-12">
            <p>Escribe algo arriba para empezar a buscar.</p>
        </div>
    {% endif %}

</div>
{% endblock %}