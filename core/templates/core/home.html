{% extends 'core/base.html' %} {% block content %}

    <div class="text-center mb-10">
        <h1 class="text-4xl font-extrabold text-slate-900 tracking-tight">Pr√≥ximos Partidos</h1>
        <p class="mt-2 text-lg text-gray-600">Predice los resultados y compite con tus amigos.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        
        {% for item in lista_partidos %}
            <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 border border-gray-100 flex flex-col">
                
                <div class="bg-slate-50 px-4 py-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wide border-b border-gray-100">
                    {{ item.partido.date|date:"D d M, H:i" }} hs
                </div>

                <div class="p-6 flex-grow flex flex-col items-center justify-center">
                    <div class="flex items-center justify-between w-full mb-4">
                        <div class="flex flex-col items-center w-1/3">
                            <div class="w-16 h-16 flex items-center justify-center mb-2">
                                {% if item.partido.home_team.logo %}
                                <img src="{{ item.partido.home_team.logo }}" alt="{{ item.partido.home_team.name }}" class="w-full h-full object-contain filter drop-shadow-sm">
                                {% else %}
                                 <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-2xl shadow-sm">
                                {{ item.partido.home_team.flag_code|default:"üè†" }}
                                </div>
                                {% endif %}
                            </div>
                            <span class="font-bold text-slate-800 text-center leading-tight">{{ item.partido.home_team.name }}</span>
                        </div>

                        <div class="w-1/3 text-center">
                            {% if item.partido.home_goals is not None %}
                                <div class="text-3xl font-black text-slate-900 tracking-tighter">
                                    {{ item.partido.home_goals }}-{{ item.partido.away_goals }}
                                </div>
                                <span class="text-xs text-green-600 font-bold bg-green-100 px-2 py-1 rounded-full">FINAL</span>
                            {% else %}
                                <div class="text-xl font-bold text-gray-300">VS</div>
                            {% endif %}
                        </div>

                        <div class="flex flex-col items-center w-1/3">
                                <div class="w-16 h-16 flex items-center justify-center mb-2">
                                    {% if item.partido.away_team.logo %}
                                    <img src="{{ item.partido.away_team.logo }}" alt="{{ item.partido.away_team.name }}" class="w-full h-full object-contain filter drop-shadow-sm">
                                    {% else %}
                                <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-2xl shadow-sm">
                                    {{ item.partido.away_team.flag_code|default:"‚úàÔ∏è" }}
                                </div>
                                {% endif %}
                                </div>
                                <span class="font-bold text-slate-800 text-center leading-tight">{{ item.partido.away_team.name }}</span>
                        </div>
                    </div>

                    <div class="w-full mt-4 pt-4 border-t border-dashed border-gray-200 text-center">
                        {% if item.prediccion %}
                            <div class="bg-blue-50 rounded-lg p-3">
                                <p class="text-xs text-blue-600 font-bold uppercase mb-1">Tu Pron√≥stico</p>
                                <p class="text-xl font-bold text-blue-900">
                                    {{ item.prediccion.predicted_home }} - {{ item.prediccion.predicted_away }}
                                </p>
                                
                                {% if item.partido.home_goals is not None %}
                                    <div class="mt-2">
                                        {% if item.prediccion.get_score == 3 %}
                                            <span class="bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-1 rounded shadow-sm">üåü ¬°EXACTO! (+3)</span>
                                        {% elif item.prediccion.get_score == 1 %}
                                            <span class="bg-blue-200 text-blue-800 text-xs font-bold px-2 py-1 rounded">‚úîÔ∏è TENDENCIA (+1)</span>
                                        {% else %}
                                            <span class="bg-gray-200 text-gray-600 text-xs font-bold px-2 py-1 rounded">‚ùå FALLO (+0)</span>
                                        {% endif %}
                                    </div>
                                {% elif item.partido.home_goals is None %}
                                     <a href="{% url 'predecir' item.partido.id %}" class="text-xs text-blue-500 hover:underline mt-2 block">
                                        Cambiar
                                     </a>
                                {% endif %}
                            </div>
                        {% else %}
                            {% if item.partido.home_goals is None %}
                                <a href="{% url 'predecir' item.partido.id %}" class="block w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-2 px-4 rounded-lg transition shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                                    ¬°Jugar Ahora!
                                </a>
                            {% else %}
                                <span class="text-gray-400 text-sm italic">No participaste</span>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>
        {% empty %}
            <div class="col-span-3 text-center py-20">
                <p class="text-gray-500 text-xl">No hay partidos cargados a√∫n.</p>
            </div>
        {% endfor %}
    </div>

{% endblock %}